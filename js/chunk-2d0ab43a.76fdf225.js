(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0ab43a"],{1511:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container py-5"},[e("UserProfileCard",{attrs:{profile:t.profile,initialIsFollowed:t.isFollowed}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-4"},[e("UserFollowingsCard",{attrs:{profile:t.profile}}),e("br"),e("UserFollowersCard",{attrs:{profile:t.profile}})],1),e("div",{staticClass:"col-md-8"},[e("UserCommentsCard",{attrs:{profile:t.profile}}),e("br"),e("UserFavoritedRestaurantsCard",{attrs:{profile:t.profile}})],1)])],1)},r=[],o=(s("d9e2"),function(){var t=this,e=t._self._c;return e("div",{staticClass:"row no-gutters"},[e("div",{staticClass:"col-md-4"},[e("img",{attrs:{src:t._f("emptyImage")(t.profile.image),width:"300px",height:"300px"}})]),e("div",{staticClass:"col-md-8"},[e("div",{staticClass:"card-body"},[e("h5",{staticClass:"card-title"},[t._v(t._s(t.profile.name))]),e("p",{staticClass:"card-text"},[t._v(t._s(t.profile.email))]),e("ul",{staticClass:"list-unstyled list-inline"},[e("li",[e("strong",[t._v(t._s(t.profile.commentsLength))]),t._v(" 已評論餐廳 ")]),e("li",[e("strong",[t._v(t._s(t.profile.favoritedRestaurantsLength))]),t._v(" 收藏的餐廳 ")]),e("li",[e("strong",[t._v(t._s(t.profile.followingsLength))]),t._v(" followings (追蹤者) ")]),e("li",[e("strong",[t._v(t._s(t.profile.followersLength))]),t._v(" followers (追隨者) ")])]),t.currentUser.id===t.profile.id?[e("router-link",{attrs:{to:{name:"user-edit",params:{id:t.profile.id}}}},[e("button",{staticClass:"btn btn-primary ml-1",attrs:{type:"submit"}},[t._v(" Edit ")])])]:[t.isFollowed?e("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.deleteFollowing(t.profile.id)}}},[t._v(" 取消追蹤 ")]):e("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.addFollowing(t.profile.id)}}},[t._v(" 追蹤 ")])]],2)])])}),l=[],i=s("2708"),n=s("2f62"),d=s("4cce"),c=s("2fa3"),m={name:"UserProfileCard",mixins:[i["a"]],props:{profile:{type:Object,default:()=>({id:-1,image:"null",name:"",email:"",comments:[],FavoritedRestaurants:[],Followers:[],Followings:[],followingsLength:0,followersLength:0,commentsLength:0,favoritedRestaurantsLength:0})},initialIsFollowed:{type:Boolean,required:!0}},computed:{...Object(n["b"])(["currentUser"])},data(){return{isFollowed:this.initialIsFollowed}},watch:{initialIsFollowed(t){this.isFollowed=t}},methods:{async addFollowing(t){try{const{data:e}=await d["a"].addFollowing({userId:t});if("error"===e.status)throw new Error(e.message);this.isFollowed=!0}catch(e){console.error(e.message),c["a"].fire({icon:"error",title:"無法加入追蹤，請稍後再試"})}},async deleteFollowing(t){try{const{data:e}=await d["a"].deleteFollowing({userId:t});if("error"===e.status)throw new Error(e.message);this.isFollowed=!1}catch(e){console.error(e.message),c["a"].fire({icon:"error",title:"無法取消追蹤，請稍後再試"})}}}},f=m,u=s("2877"),h=Object(u["a"])(f,o,l,!1,null,null,null),g=h.exports,w=function(){var t=this,e=t._self._c;return e("div",{staticClass:"card"},[e("div",{staticClass:"card-header"},[e("strong",[t._v(t._s(t.profile.followingsLength))]),t._v(" followings (追蹤者) ")]),e("div",{staticClass:"card-body"},t._l(t.followings,(function(s){return e("router-link",{key:s.id,attrs:{to:{name:"user",params:s.id}}},[e("img",{staticClass:"avatar mr-1 mb-1",attrs:{src:t._f("emptyImage")(s.image),width:"60",height:"60"}})])})),1)])},p=[],v={name:"UserFollowingsCard",mixins:[i["a"]],props:{profile:{type:Object,default:()=>({id:-1,image:"null",name:"",email:"",comments:[],FavoritedRestaurants:[],Followers:[],Followings:[],followingsLength:0,followersLength:0,commentsLength:0,favoritedRestaurantsLength:0})}},data(){return{followings:[]}},watch:{profile(){this.fetchFollowings()}},created(){this.fetchFollowings()},methods:{fetchFollowings(){this.followings=this.profile.Followings}}},F=v,C=Object(u["a"])(F,w,p,!1,null,null,null),_=C.exports,b=function(){var t=this,e=t._self._c;return e("div",{staticClass:"card"},[e("div",{staticClass:"card-header"},[e("strong",[t._v(t._s(t.profile.followersLength))]),t._v(" followers (追隨者) ")]),e("div",{staticClass:"card-body"},t._l(t.followers,(function(s){return e("router-link",{key:s.id,attrs:{to:{name:"user",params:s.id}}},[e("img",{staticClass:"avatar mr-1 mb-1",attrs:{src:t._f("emptyImage")(s.image),width:"60",height:"60"}})])})),1)])},L=[],y={name:"UserFollowersCard",mixins:[i["a"]],props:{profile:{type:Object,default:()=>({id:-1,image:"null",name:"",email:"",comments:[],FavoritedRestaurants:[],Followers:[],Followings:[],followingsLength:0,followersLength:0,commentsLength:0,favoritedRestaurantsLength:0})}},data(){return{followers:[]}},watch:{profile(){this.fetchFollowers()}},created(){this.fetchFollowers()},methods:{fetchFollowers(){this.followers=this.profile.Followers}}},R=y,U=Object(u["a"])(R,b,L,!1,null,null,null),x=U.exports,k=function(){var t=this,e=t._self._c;return e("div",{staticClass:"card"},[e("div",{staticClass:"card-header"},[e("strong",[t._v(t._s(t.profile.commentsLength))]),t._v(" 已評論餐廳 ")]),e("div",{staticClass:"card-body"},t._l(t.comments,(function(s){return e("router-link",{key:s.id,attrs:{to:{name:"restaurant",params:t.comments.RestaurantId}}},[e("img",{staticClass:"avatar mr-1 mb-1",attrs:{src:t._f("emptyImage")(s.Restaurant.image),width:"60",height:"60"}})])})),1)])},I=[],O={name:"UserCommentsCard",mixins:[i["a"]],props:{profile:{type:Object,default:()=>({id:-1,image:"null",name:"",email:"",comments:[],FavoritedRestaurants:[],Followers:[],Followings:[],followingsLength:0,followersLength:0,commentsLength:0,favoritedRestaurantsLength:0})}},data(){return{comments:[]}},watch:{profile(){this.fetchComments()}},created(){this.fetchComments()},methods:{fetchComments(){this.comments=this.profile.comments}}},j=O,P=Object(u["a"])(j,k,I,!1,null,null,null),E=P.exports,D=function(){var t=this,e=t._self._c;return e("div",{staticClass:"card"},[e("div",{staticClass:"card-header"},[e("strong",[t._v(t._s(t.profile.favoritedRestaurantsLength))]),t._v(" 收藏的餐廳 ")]),e("div",{staticClass:"card-body"},[e("div",t._l(t.favoritedRestaurants,(function(s){return e("router-link",{key:s.id,attrs:{to:{name:"restaurant",params:s.Favorite.RestaurantId}}},[e("img",{staticClass:"avatar mr-1 mb-1",attrs:{src:t._f("emptyImage")(s.image),width:"60",height:"60"}})])})),1)])])},J=[],q={name:"UserFavoritedRestaurantsCard",mixins:[i["a"]],props:{profile:{type:Object,default:()=>({id:-1,image:"null",name:"",email:"",comments:[],FavoritedRestaurants:[],Followers:[],Followings:[],followingsLength:0,followersLength:0,commentsLength:0,favoritedRestaurantsLength:0})}},data(){return{favoritedRestaurants:[]}},watch:{profile(){this.fetchfavoritedRestaurants()}},created(){this.fetchfavoritedRestaurants()},methods:{fetchfavoritedRestaurants(){this.favoritedRestaurants=this.profile.FavoritedRestaurants}}},B=q,K=Object(u["a"])(B,D,J,!1,null,null,null),T=K.exports,$={name:"User",components:{UserProfileCard:g,UserFollowingsCard:_,UserFollowersCard:x,UserCommentsCard:E,UserFavoritedRestaurantsCard:T},data(){return{profile:{id:-1,image:"null",name:"",email:"",comments:[],FavoritedRestaurants:[],Followers:[],Followings:[],followingsLength:0,followersLength:0,commentsLength:0,favoritedRestaurantsLength:0},isFollowed:!1}},created(){const{id:t}=this.$route.params;this.fetchUsers(t)},beforeRouteUpdate(t,e,s){const{id:a}=t.params;this.fetchUsers(a),s()},methods:{async fetchUsers(t){try{const e=await d["a"].get({userId:t});if("OK"!==e.statusText)throw new Error("無法顯示個人頁面，請稍後再試");const{profile:s,isFollowed:a}=e.data;this.profile={...this.profile,id:s.id,image:s.image,name:s.name,email:s.email,comments:s.Comments,FavoritedRestaurants:s.FavoritedRestaurants,Followers:s.Followers,Followings:s.Followings,followingsLength:s.Followings.length,followersLength:s.Followers.length,commentsLength:s.Comments.length,favoritedRestaurantsLength:s.FavoritedRestaurants.length},this.isFollowed=a}catch(e){console.log(e),c["a"].fire({icon:"error",title:"無法顯示個人頁面，請稍後再試"})}}}},z=$,A=Object(u["a"])(z,a,r,!1,null,null,null);e["default"]=A.exports}}]);
//# sourceMappingURL=chunk-2d0ab43a.76fdf225.js.map